
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Damar Indra">
    <title>Tilemap and Camera - Platformer Tutorial Part 4 - Godot - Damar Indra</title>
    <meta name="author" content="Damar Indra">
    
    
        <link rel="icon" href="http://damarindra.com/assets/images/avatar.ico">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="This is the fourth part of the tutorial creating platformer game on Godot Engine. In this tutorial I will explain how to setup tilemap and camera.">
<meta name="keywords" content="Godot,gamedev,game,development,platformer">
<meta property="og:type" content="blog">
<meta property="og:title" content="Tilemap and Camera - Platformer Tutorial Part 4 - Godot">
<meta property="og:url" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/index.html">
<meta property="og:site_name" content="Damar Indra">
<meta property="og:description" content="This is the fourth part of the tutorial creating platformer game on Godot Engine. In this tutorial I will explain how to setup tilemap and camera.">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/tilemap_structure.jpg">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/assign_sprite.gif">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/setup_collision.gif">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/setup_tileset.gif">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/all_tileset.jpg">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/tilemap_option.jpg">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/world_creation.gif">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/drag_margin.gif">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/display_project_settings.jpg">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/camera_option.jpg">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/camera_basic.gif">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/camera_x.gif">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/camera_y.gif">
<meta property="og:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/player_script_variables.jpg">
<meta property="og:updated_time" content="2017-09-15T16:22:17.683Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tilemap and Camera - Platformer Tutorial Part 4 - Godot">
<meta name="twitter:description" content="This is the fourth part of the tutorial creating platformer game on Godot Engine. In this tutorial I will explain how to setup tilemap and camera.">
<meta name="twitter:image" content="http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/tilemap_structure.jpg">
<meta name="twitter:creator" content="@damarind">
    
    
        
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/dfe6ee574d2885e5aa8a3565180d9647?s=640"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/font-awesome.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox-thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-105267687-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">Damar Indra</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="https://www.gravatar.com/avatar/dfe6ee574d2885e5aa8a3565180d9647?s=90" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/dfe6ee574d2885e5aa8a3565180d9647?s=110" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Damar Indra</h4>
                
                    <h5 class="sidebar-profile-bio"><p>damarind@gmail.com</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/damarindra/" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://nirama-dama.deviantart.com" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-deviantart"></i>
                        <span class="sidebar-button-desc">DeviantArt</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://twitter.com/damarind" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://www.facebook.com/damar.indera" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-facebook"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="mailto:damarind@gmail.com" target="_blank" rel="noopener">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/atom.xml"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<!-- Want make Table of Content more good? activate this, but not working

  <div id="toc" class="toc-article">
    <strong class="toc-title">Posts List</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Tileset-and-Tilemap"><span class="toc-text">Tileset and Tilemap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Tileset"><span class="toc-text">Tileset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tilemap"><span class="toc-text">Tilemap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Camera"><span class="toc-text">Camera</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Configure-Display-Settings"><span class="toc-text">Configure Display Settings</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scripting-Camera"><span class="toc-text">Scripting Camera</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Add-New-Code-into-Player-Script"><span class="toc-text">Add New Code into Player Script</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Interpolate-the-Camera-Movement"><span class="toc-text">Interpolate the Camera Movement</span></a></li></ol></li></ol>
  </div>


-->
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            Tilemap and Camera - Platformer Tutorial Part 4 - Godot
        </h1>
    
    
        <div class="post-meta">
    <time itemprop="datePublished" datetime="2017-09-07T00:21:41+07:00">
	
		    Sep 07, 2017
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/godot/">godot</a>, <a class="category-link" href="/categories/godot/tutorial/">tutorial</a>, <a class="category-link" href="/categories/godot/tutorial/tutorial-platformer/">tutorial_platformer</a>


    
</div>

    
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <div class="spoiler collapsed"><div class="spoiler-title">Table of Content</div><div class="spoiler-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Tileset-and-Tilemap"><span class="toc-text">Tileset and Tilemap</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Tileset"><span class="toc-text">Tileset</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tilemap"><span class="toc-text">Tilemap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Camera"><span class="toc-text">Camera</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Configure-Display-Settings"><span class="toc-text">Configure Display Settings</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scripting-Camera"><span class="toc-text">Scripting Camera</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Add-New-Code-into-Player-Script"><span class="toc-text">Add New Code into Player Script</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Interpolate-the-Camera-Movement"><span class="toc-text">Interpolate the Camera Movement</span></a></li></ol></li></ol></div></div>
<p>This is the fourth part of the tutorial creating platformer game on Godot Engine. In this tutorial I will explain how to setup tilemap and camera.<br><a id="more"></a></p>
<ol>
<li><a href="/2017/08/24/godot_platformer_tutorial/godot-1-0-preparation/" title="Part 1 : Preparation">Part 1 : Preparation</a></li>
<li><a href="/2017/08/28/godot_platformer_tutorial/godot-1-1-player-creation/" title="Part 2 : Player Creation">Part 2 : Player Creation</a></li>
<li><a href="/2017/09/02/godot_platformer_tutorial/godot-1-2-player-creation-2/" title="Part 3 : Player Creation 2">Part 3 : Player Creation 2</a></li>
<li><strong>Part 4 : Tilemap and Camera</strong></li>
<li><a href="/2017/09/12/godot_platformer_tutorial/godot-1-4-player-creation-3/" title="Part 5 : Player Animation">Part 5 : Player Animation</a></li>
<li><a href="/2017/09/16/godot_platformer_tutorial/godot-1-5-parallax-and-level-bounds/" title="Part 6 : Parallax Background and Level Bounds">Part 6 : Parallax Background and Level Bounds</a>
</li>
</ol>
<h2 id="Tileset-and-Tilemap"><a href="#Tileset-and-Tilemap" class="headerlink" title="Tileset and Tilemap"></a>Tileset and Tilemap</h2><p>Godot has a special tilemap node, so we don’t need 3rd party software like Tiled to make our level. Create and setup tilemap is not that hard, what you need to do is just create new scene and fill it with bunch of node for the tileset.</p>
<h3 id="Tileset"><a href="#Tileset" class="headerlink" title="Tileset"></a>Tileset</h3><p>Before we go into level design, we need to make our tileset. Create a new scene and create a Node2D (rename to “Tileset”) as the root. Then create a sprite node as a child of <em>Tileset</em>. So we have 2 node, one is <strong>Tileset</strong> and the other one is <strong>Sprite</strong>. Each child of <strong>Tileset</strong> will become <strong>tiles</strong> (only sprite node) and the name of sprite node will become the <strong>ID</strong>. Rename the sprite into “0”.</p>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/tilemap_structure.jpg" alt="Tilemap Scene" title="Tilemap Scene">
<p>I want to create my first tile with the <em>left top ground</em>, assign the Texture with Tiles.png, set the <strong>VFrames = 20</strong> and <strong>HFrames = 22</strong>. Set the sprite into “left top ground” image by changing the <strong>Frame = 79</strong>. So we got our first tile.</p>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/assign_sprite.gif" alt="Setup Tiles 0" title="Setup Tiles 0">
<p>This tile is ground type, which means need a collision. The collision is static, so, add a new StaticBody2D Node as a child of “0”. Then add a new CollisionShape2D as a child of StaticBody2D. Set the CollisionShape2D with RectangleShape2D and setup the size of RectangleShape2D along with the size of ground sprite.</p>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/setup_collision.gif" alt="Setup Collision Tiles 0" title="Setup Collision Tiles 0">
<div class="alert info"><p><strong>PRO TIPS</strong> : You can edit collision shape into precise value by activating the Snap Option. Click <em>Edit - Use Snap</em>, setup the snap value by clicking <em>Edit - Configure Snap</em>.</p>
</div>
<p>Okay, we are done with one tile, 12 left! You can duplicate the node by pressing CTRL + D and setup it as needed, until you got all this tileset</p>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/setup_tileset.gif" alt="Setup Tileset" title="Setup Tileset">
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/all_tileset.jpg" alt="All Tiles" title="All Tiles">
<p>Save the scene as Tileset.tscn, then click <em>Scene - Convert To.. - Tileset</em>, save it as tileset.tres make sure enable Merge With Existing Option. Yeay, we’ve done creating the Tileset.</p>
<h3 id="Tilemap"><a href="#Tilemap" class="headerlink" title="Tilemap"></a>Tilemap</h3><p>We’ve create the tileset, now we can create our World level. Open World.tscn delete our <em>StaticBody2D</em> Node and create a Tilemap Node. View at Inspector Window, find Tile Set option, click the <em><null></null></em> button, and select <em>Load</em>, navigate to our tileset.tres file. Because our tiles size is 16x16 px so we need to change the Cell Size. Find option <strong>Size</strong> inside <em>Cell</em> section, change it into (16, 16).</p>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/tilemap_option.jpg" alt="Tilemap" title="Tilemap">
<p>Now create a simple level! Left click to paint, right click to delete.</p>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/world_creation.gif" alt="Setup World" title="Setup World">
<div class="alert info"><p><strong>PRO TIPS</strong> : In my tileset view maybe different from yours, you can configure it in TileMap Editor Settings. Click <em>Settings - Editor Settings - Tilemap - Change the value as you wish</em>.</p>
</div>
<h2 id="Camera"><a href="#Camera" class="headerlink" title="Camera"></a>Camera</h2><p>Camera will always follow the player. But how? You can easily set the camera node as a child of Player, but that just dirty trick and not pleasing in the eyes. Or you can use Drag Margin (found in inspector), but I don’t like it, however it’s easy and good. If you using Drag Margin, when you moving on the right direction, the camera will be on the left of character, and otherwise. That makes user can’t see clearly what happen in the next area, because the camera always left behind the character. That was Drag Margin and that was opposite of my implementation. If the character moving right direction, I want the camera is on the right side, so user can see clearly in the next area, hope you understand what I mean :). Here you go example of using Drag Margin</p>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/drag_margin.gif" alt="Camera Drag Margin" title="Camera Drag Margin">
<div class="alert info"><p><strong>PRO TIPS</strong> : As far as I know, godot automatically set pixel perfect for you (make sure your sprite import flags disabled). So, the camera movement must be not <strong>floating point</strong>. Image above is not good for pixel art, because the camera position will be at floating point. If you really need the camera at floating point, you can activate in <strong>use_2d_pixel_snap</strong> inside <em>Project Setting - Display</em>, this will force the render result always pixel perfect, but the result maybe little weird, in my opinion of course.</p>
</div>
<h3 id="Configure-Display-Settings"><a href="#Configure-Display-Settings" class="headerlink" title="Configure Display Settings"></a>Configure Display Settings</h3><p>So, before we go into coding, we need to modify our display settings at <strong>Project Setting</strong>. Open <strong>Project Setting</strong> by clicking <em>Scene - Project Setting - Display</em>. Now change the <strong>width</strong> = 160, <strong>height</strong> = 86, <strong>stretch_mode</strong> = viewport, <strong>stretch_aspect</strong> = keep_height and <strong>use_2d_pixel_snap</strong> = on.</p>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/display_project_settings.jpg" alt="Project Setting - Display" title="Project Setting - Display">
<h3 id="Scripting-Camera"><a href="#Scripting-Camera" class="headerlink" title="Scripting Camera"></a>Scripting Camera</h3><p>Modify Camera2D option in Inspector by disabling the <strong>H Enabled</strong> and <strong>V Enabled</strong>, and set the <em>Smoothing <strong>Speed</strong> </em> to 0. You can play a bit with <strong>Offset</strong> value, my setup is (0, -20).</p>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/camera_option.jpg" alt="Camera Settings" title="Camera Settings">
<p>Create a new script and attach into Camera2D, save it as camera.gd, and write the code</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">extends Camera2D</div><div class="line"></div><div class="line">export var target = <span class="string">"../Player"</span></div><div class="line"></div><div class="line"><span class="comment"># onready prefix : Initializes a variable once the Node the script is attached to and its children are part of the scene tree.</span></div><div class="line">onready var target_node = get_node(target)</div><div class="line"></div><div class="line">func _ready():</div><div class="line">	<span class="comment"># window maximized, comment this line code if you don't want to automatically maximized</span></div><div class="line">	OS.set_window_maximized(true)</div><div class="line">	var pos = target_node.get_pos()</div><div class="line">	<span class="comment"># forcing set the position into character position</span></div><div class="line">	pos = Vector2(round(pos.x), round(pos.y))</div><div class="line">	set_pos(pos)</div><div class="line">	set_fixed_process(true)</div><div class="line"></div><div class="line">func _fixed_process(delta):</div><div class="line">	<span class="comment"># set the position into integer number</span></div><div class="line">	set_pos(Vector2(round(target_node.get_pos().x), round(target_node.get_pos().y)))</div></pre></td></tr></table></figure>
<div class="alert info"><p><code>onready</code> will initializes the variable when the node is ready, including the child of node</p>
</div>
<p>As I said before, we make the camera position value into integer number (ex 1, 2, 3, 10), so we need to call <strong>round</strong> to make it integer.</p>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/camera_basic.gif" alt="Camera Follow" title="Camera Follow">
<h3 id="Add-New-Code-into-Player-Script"><a href="#Add-New-Code-into-Player-Script" class="headerlink" title="Add New Code into Player Script"></a>Add New Code into Player Script</h3><p>The camera always follow the player and the position is always same as player position, that was not what we want to achieve. The camera will in front of player, but how to know the character direction? currently we don’t have it, so modify our <strong>player script</strong>. Add a new variable called <code>var facing_dir = 1</code> and modify our code at the end of <code>func _fixed_process(delta)</code> and add one new function to get the real center position</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#other code</span></div><div class="line">func _fixed_process(delta):</div><div class="line">	<span class="comment">#other code</span></div><div class="line"></div><div class="line">	<span class="keyword">if</span> velocity.x != <span class="number">0</span>:</div><div class="line">		facing_dir = sign(velocity.x)</div><div class="line"></div><div class="line">func get_center_pos():</div><div class="line">	<span class="keyword">return</span> get_pos() + get_node(<span class="string">"CollisionShape2D"</span>).get_pos()</div></pre></td></tr></table></figure>
<h3 id="Interpolate-the-Camera-Movement"><a href="#Interpolate-the-Camera-Movement" class="headerlink" title="Interpolate the Camera Movement"></a>Interpolate the Camera Movement</h3><p>Now, we have information about player direction and the real center position. Back to camera.gd script and create 2 new variable called <code>export var forward_offset = 60</code> and <code>export var x_smoothing = .05</code>, then modify our code into like this.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">extends Camera2D</div><div class="line"></div><div class="line">export var target = <span class="string">"../Player"</span></div><div class="line">export var forward_offset = <span class="number">60</span></div><div class="line">export var x_smoothing = <span class="number">.05</span></div><div class="line"></div><div class="line"><span class="comment"># onready prefix : Initializes a variable once the Node the script is attached to and its children are part of the scene tree.</span></div><div class="line">onready var target_node = get_node(target)</div><div class="line"></div><div class="line">func _ready():</div><div class="line">	<span class="comment"># window maximized, comment this line code if you don't want to automatically maximized</span></div><div class="line">	OS.set_window_maximized(true)</div><div class="line">	var pos = target_node.get_pos()</div><div class="line">	<span class="comment"># forcing set the position into character position</span></div><div class="line">	pos = Vector2(round(pos.x), round(pos.y))</div><div class="line">	set_pos(pos)</div><div class="line">	set_fixed_process(true)</div><div class="line"></div><div class="line">func _fixed_process(delta):</div><div class="line">	var target_pos = target_node.get_center_pos() + Vector2(<span class="number">1</span>, <span class="number">0</span>) * target_node.facing_dir * forward_offset</div><div class="line">	<span class="comment"># smoothing the movement</span></div><div class="line">	target_pos.x = lerp(get_pos().x, target_pos.x, x_smoothing)</div><div class="line">	<span class="comment">#gap it when the next position is out of bound</span></div><div class="line">	<span class="keyword">if</span> abs(target_pos.x - target_node.get_center_pos().x) &gt; forward_offset:</div><div class="line">		target_pos.x = target_node.get_center_pos().x + target_node.facing_dir * forward_offset * <span class="number">-1</span></div><div class="line">	<span class="comment"># set the position into integer number</span></div><div class="line">	set_pos(Vector2(round(target_pos.x), round(target_pos.y)))</div></pre></td></tr></table></figure>
<div class="alert info"><p><code>lerp</code> also called as Linear Interpolation. When calling lerp(from, to, weight), if weight = 0 will return same as <strong>from</strong>, and if weight = 1 will return same as <strong>to</strong></p>
</div>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/camera_x.gif" alt="Camera Follow X Interpolation" title="Camera Follow X Interpolation">
<p>Now, the camera position will in front of player position. Now, let’s interpolate the y axis, create 2 new variable <code>export var max_y_offset = 5</code> and <code>export var y_smoothing = .1</code> and add 3 line code</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#other code</span></div><div class="line">func _fixed_process(delta):</div><div class="line">	<span class="comment">#other code</span></div><div class="line">	<span class="keyword">if</span> abs(target_pos.x - target_node.get_center_pos().x) &gt; forward_offset:</div><div class="line">		target_pos.x = target_node.get_center_pos().x + target_node.facing_dir * forward_offset * <span class="number">-1</span></div><div class="line"></div><div class="line">	target_pos.y = lerp(get_pos().y, target_pos.y + max_y_offset, y_smoothing)</div><div class="line">	<span class="keyword">if</span> abs(target_pos.y - target_node.get_center_pos().y) &gt; max_y_offset:</div><div class="line">		target_pos.y =  target_node.get_center_pos().y + (sign(target_pos.y - target_node.get_center_pos().y) * max_y_offset)</div><div class="line"></div><div class="line">	set_pos(Vector2(round(target_pos.x), round(target_pos.y)))</div></pre></td></tr></table></figure>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/camera_y.gif" alt="Camera Follow Y Interpolation" title="Camera Follow Y Interpolation">
<p>Done! This is the final code</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">extends Camera2D</div><div class="line"></div><div class="line">export var target = <span class="string">"../Player"</span></div><div class="line">export var forward_offset = <span class="number">60</span></div><div class="line">export var max_y_offset = <span class="number">5</span></div><div class="line">export var x_smoothing = <span class="number">.05</span></div><div class="line">export var y_smoothing = <span class="number">.1</span></div><div class="line"></div><div class="line">onready var target_node = get_node(target)</div><div class="line"></div><div class="line">func _ready():</div><div class="line">	OS.set_window_maximized(true)</div><div class="line">	var pos = target_node.get_pos()</div><div class="line">	pos = Vector2(round(pos.x), round(pos.y))</div><div class="line">	set_pos(pos)</div><div class="line">	set_fixed_process(true)</div><div class="line"></div><div class="line">func _fixed_process(delta):</div><div class="line">	var target_pos = target_node.get_center_pos() + Vector2(<span class="number">1</span>, <span class="number">0</span>) * target_node.facing_dir * forward_offset</div><div class="line">	target_pos.x = lerp(get_pos().x, target_pos.x, x_smoothing)</div><div class="line">	<span class="comment">#gap it when the next position is out of bound</span></div><div class="line">	<span class="comment">#salah</span></div><div class="line">	<span class="keyword">if</span> abs(target_pos.x - target_node.get_center_pos().x) &gt; forward_offset:</div><div class="line">		target_pos.x = target_node.get_center_pos().x + target_node.facing_dir * forward_offset * <span class="number">-1</span></div><div class="line"></div><div class="line">	target_pos.y = lerp(get_pos().y, target_pos.y + max_y_offset, y_smoothing)</div><div class="line">	<span class="keyword">if</span> abs(target_pos.y - target_node.get_center_pos().y) &gt; max_y_offset:</div><div class="line">		target_pos.y =  target_node.get_center_pos().y + (sign(target_pos.y - target_node.get_center_pos().y) * max_y_offset)</div><div class="line"></div><div class="line">	set_pos(Vector2(round(target_pos.x), round(target_pos.y)))</div></pre></td></tr></table></figure>
<p>My player script variables values has been changed, if you want to follow my setup, here we go. You can also playing a bit with script variables, don’t be scared about that</p>
<img src="/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/player_script_variables.jpg" alt="Player Script Variables" title="Player Script Variables">
<div class="alert info"><p>Make sure your <strong>camera</strong> always at the last order from another node.</p>
</div>
<p>Next part, we will setup our <a href="/2017/09/12/godot_platformer_tutorial/godot-1-4-player-creation-3/" title="setup our player again, animation, direction and other stuff">setup our player again, animation, direction and other stuff</a> for the next part</p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Godot/">Godot</a> <a class="tag tag--primary tag--small t-link" href="/tags/development/">development</a> <a class="tag tag--primary tag--small t-link" href="/tags/game/">game</a> <a class="tag tag--primary tag--small t-link" href="/tags/gamedev/">gamedev</a> <a class="tag tag--primary tag--small t-link" href="/tags/platformer/">platformer</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
		<li class="post-action">
		    
			<a class="post-action-btn btn btn--default tooltip--top" href="/2017/09/02/godot_platformer_tutorial/godot-1-2-player-creation-2/" data-tooltip="Player Creation 2 - Platformer Tutorial Part 3 - Godot">
		    
			<span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
			<i class="fa fa-angle-left"></i>
		    </a>
		</li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/09/12/godot_platformer_tutorial/godot-1-4-player-creation-3/"  data-tooltip="Player Animation - Platformer Tutorial Part 5 - Godot">
                
                    <i class="fa fa-angle-right"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/">
                    <i class="fa fa-facebook-official"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/">
                    <i class="fa fa-google-plus"></i>
                </a>
            </li>
        
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>

        
        
            
        
    </div>
</article>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2017 Damar Indra. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
		<li class="post-action">
		    
			<a class="post-action-btn btn btn--default tooltip--top" href="/2017/09/02/godot_platformer_tutorial/godot-1-2-player-creation-2/" data-tooltip="Player Creation 2 - Platformer Tutorial Part 3 - Godot">
		    
			<span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
			<i class="fa fa-angle-left"></i>
		    </a>
		</li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2017/09/12/godot_platformer_tutorial/godot-1-4-player-creation-3/"  data-tooltip="Player Animation - Platformer Tutorial Part 5 - Godot">
                
                    <i class="fa fa-angle-right"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/">
                    <i class="fa fa-facebook-official"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/">
                    <i class="fa fa-twitter"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/">
                    <i class="fa fa-google-plus"></i>
                </a>
            </li>
        
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>

                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="4">
    <i id="btn-close-shareoptions" class="fa fa-close"></i>
    <ul class="share-options">
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/">
                    <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/">
                    <i class="fa fa-twitter"></i><span>Share on Twitter</span>
                </a>
            </li>
        
            
            
            <li class="share-option">
                <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://damarindra.com/2017/09/07/godot_platformer_tutorial/godot-1-3-tilemap-and-camera/">
                    <i class="fa fa-google-plus"></i><span>Share on Google+</span>
                </a>
            </li>
        
    </ul>
</div>

            
        </div>
        


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/dfe6ee574d2885e5aa8a3565180d9647?s=110" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Damar Indra</h4>
        
            <div id="about-card-bio"><p>damarind@gmail.com</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Game Developer, Programmer, Artist</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Indonesia
            </div>
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    />
            </form>
        </div>
        <div class="modal-body">
            <div id= "list-search" class="results">
            </div>
        </div>
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.gif');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/jquery.fancybox-thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->

    


    </body>
</html>
